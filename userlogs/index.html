<!doctype html>
<html>
<head>

  <!-- set charset -->
  <meta charset="UTF-8"/>

  <!-- Viewport meta tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Description meta tag -->
  <meta name="description" content="Link Rover is a tool created by Fahad Alamgir Dhruba." />

  <!-- Keywords meta tag -->
  <meta name="keywords" content="Google Drive, link, viewable, downloadable, Fahad Alamgir Dhruba, Link Rover" />

  <!-- Author meta tag -->
  <meta name="author" content="Fahad Alamgir Dhruba" />

  <!-- Canonical link tag -->
  <link rel="canonical" href="https://linkrover.netlify.app/" />

  <!-- Open Graph tags -->
  <meta property="og:title" content="Link Rover V3" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://linkrover.netlify.app/" />
  <meta property="og:image" content="https://linkrover.netlify.app/images/logo.png" /> 
  <meta property="og:description" content="Link Rover is a tool created by Fahad Alamgir Dhruba." />

  <!-- Twitter card tags -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Link Rover V3" />
  <meta name="twitter:description" content="Link Rover is a tool created by Fahad Alamgir Dhruba." /> 
  <meta name="twitter:image" content="https://linkrover.netlify.app/images/logo.png" />
  <meta name="twitter:url" content="https://linkrover.netlify.app/" />

  <!-- WhatsApp meta tags -->
  <meta name="whatsapp:description" content="Link Rover is a tool created by Fahad Alamgir Dhruba." />
  <meta name="whatsapp:title" content="Link Rover V3" />
  <meta name="whatsapp:image" content="https://linkrover.netlify.app/images/logo.png"/>
  <meta name="whatsapp:url" content="https://linkrover.netlify.app/" />

  <!-- Favicon -->
  <link rel="shortcut icon" href="src/favicon.ico" type="image/x-icon" />
  
  <!-- tailwind cdn script -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- flowbite CDN -->


  
  <!-- font awesome cdn -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- title -->
  <title>User Logs</title>
</head>
<body class="bg-slate-200 dark:bg-gray-800">

  <!-- nav bar area starts -->

  

  <!-- nav bar area ends -->

   
  <!-- task showing section starts {supremeDiv container} -->

  <section class="m-2">
    <div class="container mx-auto text-center">
        <h1 class="mb-4 text-xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-2xl"><span class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">User</span> Logs</h1>
    </div>

    <div class="p-3 mx-2 my-4 md:mx-40 rounded-lg bg-gray-50 dark:bg-gray-700">
        <div class="w-full">
        
            <div id="accordion-flush" data-accordion="collapse" data-active-classes="bg-white dark:bg-gray-900 text-gray-900 dark:text-white" data-inactive-classes="text-gray-500 dark:text-gray-400">
            <div id="supremeDiv">
                
                
                <!-- <div id="accord-point">
                    <h2 id="accordion-flush-heading-1">
                        <button type="button" class="flex items-center justify-between w-full py-3 px-2 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3 rounded" data-accordion-target="#${uid}" aria-expanded="" aria-controls="${uid}">
                            <div>
                                <span><i class="fa fa-terminal" aria-hidden="true"></i></span>
                                
                                <span id="log-user" class="">${name}</span>
                            </div>
                            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                            </svg>
                        </button>
                    </h2>
                    <div id="${uid}" class="hidden" aria-labelledby="accordion-flush-heading-1">
                        <div class="p-2 border-b border-gray-200 dark:border-gray-700">
                            
                            <div class="px-2 py-1 text-gray-500 dark:text-gray-400">
                                <span><i class="fa fa-user w-4 text-center" aria-hidden="true"></i></span>
                                <span id="log-user-name" class="">${name}</span>
                            </div>

                            <div class="px-2 py-1 text-gray-500 dark:text-gray-400">
                                <span><i class="fa fa-envelope-o w-4 text-center" aria-hidden="true"></i></span>
                                <span id="log-user-email" class="">${email}</span>
                            </div>

                            <div class="px-2 py-1 text-gray-500 dark:text-gray-400">
                                <span><i class="fa fa-info w-4 text-center" aria-hidden="true"></i></span>
                                <span id="log-user-uid" class="">${uid}</span>
                            </div>

                            <div class="px-2 py-1 text-gray-500 dark:text-gray-400">
                                <span><i class="fa fa-clock-o w-4 text-center" aria-hidden="true"></i></span>
                                <span id="log-user-time" class="">${time}</span>
                            </div>

                        </div>
                    </div>
                </div> -->

            </div>
                
            
            
            </div>
            
  
        </div>

        
    </div>
  </section>

  <!-- task showing section ends -->
 

  <!-- footer starts here -->

  <footer class="text-gray-800 dark:text-gray-100 py-4 w-full">
    <div class="container mx-auto text-center">
        <p class="text-sm">Â© 2023 <a href="https://github.com/FahadDhruba/" class="hover:underline">Fahad Alamgir Dhruba</a>. All rights reserved.</p>
    </div>
  </footer>

    <!-- footer ends here -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-analytics.js";
        import { getDatabase, ref, set, onValue, query, orderByChild, orderByValue, orderByKey, } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-database.js"; 
        import { getAuth, signInWithPopup, GoogleAuthProvider, signInWithRedirect, onAuthStateChanged, } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
  
        const firebaseConfig = {
          apiKey: "AIzaSyD0z9y5NuCs2OTHo5akeIV5-hQYRvpOXmE",
          authDomain: "link-rover-3.firebaseapp.com",
          databaseURL: "https://link-rover-3-default-rtdb.firebaseio.com",
          projectId: "link-rover-3",
          storageBucket: "link-rover-3.appspot.com",
          messagingSenderId: "715683693672",
          appId: "1:715683693672:web:0d86f9370a7949095727dd",
          measurementId: "G-CPTVR03Q63",
        };
  
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
  
        //###############f
        const db = getDatabase(app);
  
        // auth setup
  
        const auth = getAuth();
  
        auth.languageCode = "it";
  
        const provider = new GoogleAuthProvider();
  
        // Check user signed in or not
  
        onAuthStateChanged(auth, (user) => {
          if (user) {
            // User is signed in
  
            const pullRef = ref(db, "user");
  
            onValue(pullRef, (snapshot) => {
              const logData = snapshot.val();
              
  
              if (logData === null) {
                
                // null object 
  
                let supreme = '<div> <h4 class="w-full text-gray-800 mt-8 text-center font-bold text-lg">Sorry No link Found...!!!</h4> </div>';
  
                document.getElementById("supremeDiv").innerHTML = supreme;
              } else {
                
                
                let putFix = "";
                for (let x in logData) {
                  // Accessing data for a specific entry
                  const entryKey = x;
                  const entry = logData[entryKey];
  
                  // Now you can access individual properties "+"
                  const name = entry.displayName;
                  const uid = entry.uid;
                  const time = entry.creationTime;
                  const email = entry.email;
                  const pool = entry.pool;
                  const photoURL = entry.photoURL;
  
                  putFix +=`<div id="accord-point"> <h2 id="accordion-flush-heading-1"> <button type="button" class="flex items-center justify-between w-full py-3 px-2 font-medium rtl:text-right text-gray-500 border-b border-gray-200 dark:border-gray-700 dark:text-gray-400 gap-3 rounded" data-accordion-target="#${uid}" aria-expanded="" aria-controls="${uid}"> <div> <span><i class="fa fa-terminal" aria-hidden="true"></i></span> <span id="log-user" class="">${name}</span> </div> <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"> <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/> </svg> </button> </h2> <div id="${uid}" class="hidden" aria-labelledby="accordion-flush-heading-1"> <div class="p-2 border-b border-gray-200 dark:border-gray-700"> <div class="px-2 py-1 text-gray-500 dark:text-gray-400"> <span><i class="fa fa-user w-4 text-center" aria-hidden="true"></i></span> <span id="log-user-name" class="">${name}</span> </div> <div class="px-2 py-1 text-gray-500 dark:text-gray-400"> <span><i class="fa fa-envelope-o w-4 text-center" aria-hidden="true"></i></span> <span id="log-user-email" class="">${email}</span> </div> <div class="px-2 py-1 text-gray-500 dark:text-gray-400"> <span><i class="fa fa-info w-4 text-center" aria-hidden="true"></i></span> <span id="log-user-uid" class="">${uid}</span> </div> <div class="px-2 py-1 text-gray-500 dark:text-gray-400"> <span><i class="fa fa-clock-o w-4 text-center" aria-hidden="true"></i></span> <span id="log-user-time" class="">${time}</span> </div> </div> </div> </div>`;
  
                }
                document.getElementById("supremeDiv").innerHTML = putFix;
  
                // Get all elements with class "cop"
                var divs = document.getElementsByClassName("clickP");
  
                // Add click event listener to each div
                for (var i = 0; i < divs.length; i++) {
                  divs[i].addEventListener("click", function () {
                    // Find the child div with id "nos" and copy its text
                    var clickC = this.querySelector("#clickC");
                    if (clickC) {
                      copyText(clickC.innerText);
                      var rep = this.querySelector("#rep");
                      rep.innerText = "copied";
                    }
                  });
                }
              }
            });
  
            // Function to copy text to the clipboard
            function copyText(text) {
              // Create a textarea element and set its value to the text
              var textarea = document.createElement("textarea");
              textarea.value = text;
  
              // Append the textarea to the document
              document.body.appendChild(textarea);
  
              // Select the text in the textarea
              textarea.select();
              textarea.setSelectionRange(0, 99999); /* For mobile devices */
  
              // Copy the selected text to the clipboard
              document.execCommand("copy");
  
              // Remove the textarea from the document
              document.body.removeChild(textarea);
  
              // Optionally, you can provide visual feedback to the user
              //alert("Text copied: " + text);
            }
          } else {
            // User is signed out
  
            // Function to set a cookie
            function setCookie(name, value, daysToExpire) {
              var expires = "";
      
              if (daysToExpire) {
                var date = new Date();
                date.setTime(date.getTime() + (daysToExpire * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
              }
      
              document.cookie = name + "=" + value + expires + "; path=/";
            }
  
            setCookie("PrePage", "../view", 7);
  
            window.location.href = "../signin/";
          }
        });
      </script>

  </body>
</html>
